#pragma once
#include "string"

const int SECONDS_IN_DAY = 3600 * 24;

const char* GetTimeInText(time_t curTime);
void _cdecl ExitMsg(char *text, ...);
char GetchFiltered();  // Игнорирует код -32 (встречается, например, у стрелок)
void ClearConsoleScreen(char fill = ' ');
int EnterNumberFromConsole();
bool IfDirExists(const std::string& dirName);
void CopyToClipboard(const std::string &s);

//===============================================================================================
// 
//===============================================================================================

struct Log
{
	explicit Log(const char* fileName): _fileName(fileName) {}
	void _cdecl operator()(const char *text, ...);

	std::string _fileName;
};


//===============================================================================================
// 
//===============================================================================================

inline bool IsDigit(char c)
{
	return  c >= '0'  &&  c <= '9';
}

//===============================================================================================
// 
//===============================================================================================

inline float Interp(float x1, float y1, float x2, float y2, float x)
{
	float k = (y2 - y1) / (x2 - x1);
	float b = y1 - x1*k;
	return x*k + b;
}

//===============================================================================================
// 
//===============================================================================================

inline float InterpClip(float x1, float y1Min, float x2, float y2Max, float x)
{
	float y = Interp(x1, y1Min, x2, y2Max, x);

	if (y < y1Min)
		return y1Min;

	if (y > y2Max)
		return y2Max;

	return y;
}

//===============================================================================================
// 
//===============================================================================================

inline int RandInt(int min, int max)
{
	return   rand() * (max - min + 1) / (RAND_MAX + 1) + min;
}

//===============================================================================================
// 
//===============================================================================================

inline float RandFloat(float min, float max)
{
	return   rand() * (max - min) / RAND_MAX + min;
}


//===============================================================================================
// 
//===============================================================================================

inline bool IsRussianSymbol(unsigned int c)
{
	if ((c >= 224 && c <= 255) ||
		(c >= 192 && c <= 223) ||
		c == 184 ||
		c == 168)
		return true;
	return false;
}

//===============================================================================================
// 
//===============================================================================================

inline bool IsSymbol(unsigned int c)
{
	if (IsRussianSymbol(c))
		return true;

	return (c >= 'a'  &&  c <= 'z') || (c >= 'A'  &&  c <= 'Z');
}

//===============================================================================================
// 
//===============================================================================================

template<class T>
void ClampMin(T* v, const T& lo)
{
	if (*v < lo)
		*v = lo;
}


//===============================================================================================
// 
//===============================================================================================

template<class T>
void ClampMax(T* v, const T& hi)
{
	if (*v > hi)
		*v = hi;
}

//===============================================================================================
// 
//===============================================================================================

template<class T>
void ClampMinmax(T* v, const T& lo, const T& hi)
{
	if (*v < lo)
		*v = lo;
	else
		if (*v > hi)
			*v = hi;
}
